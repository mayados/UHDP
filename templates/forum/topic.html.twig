{% extends 'base.html.twig' %}

{% block title %}{{topic.titre}}{% endblock %}

{% block body %}

<div class="container-page">

    {{ topic.titre }}

    {{ topic.dateCreation | date('d-m-Y') }}

    {{ topic.auteur }}

    <a href="{{path('remove_topic', {'id': topic.id}) }}">Supprimer le topic</a>
 
    {% for post in topic.posts %}
        <div class="post">
            {{ post.texte }}
            ({{ post.auteur }})
            <a href="{{path('remove_post', {'id': post.id, 'idTopic': topic.id}) }}">Delete</a>
        </div>
    {% endfor %}

    <a href="{{ path('verrouillage_topic', {'id': topic.id}) }}">Verrouiller le topic</a>






    {% if topic.verrouillage == 0 %}
        <h5>Ajout de commentaires</h5>
        {% if app.user.isVerified %}
            {{ form_start(formAddPost) }}    
            {{ form_end(formAddPost) }}
        {% else %}
        <p>Veuillez cliquer sur le lien envoyé à votre adresse mail pour pouvoir commenter</p>
        {% endif %}
    {% else %}
        <p>Le topic est verrouillé, vous ne pouvez plus écrire de message</p>
    {% endif %}

</div>




{% endblock %}
